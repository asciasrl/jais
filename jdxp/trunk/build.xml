<project default="jar">
	<target name="compile">
		<javac srcdir="src" />
		<javac dstdir="bin" />
	</target>

	<target name="jar">
		<delete file="jdxp.jar"/>
		<property name="version.num" value="1.00"/>
		<buildnumber file="build.num"/>
		<tstamp>
			<format property="TODAY" pattern="yyyy-MM-dd HH:mm:ss" />
			<format property="YMDHMS" pattern="yyyyMMddHHmmSS" />
		</tstamp>
		<property name="v" value="${version.num}.v${YMDHMS}-b${build.number}"/>
		
		<manifest file="MANIFEST.MF">
			<attribute name="Built-By" value="${user.name}"/>
			<attribute name="Implementation-Version" value="${v}"/>   
			<attribute name="Built-Date" value="${TODAY}"/>                 
		</manifest>
		
		<jar destfile="jdxp.jar"
		   basedir="bin"
		   includes="**/*.class"
		   manifest="MANIFEST.MF"
		   />
		<delete verbose="true">
			<fileset dir="../installer/lib">
			  <include name="jdxp*.jar"/>
			</fileset>
		</delete>
		<copy verbose="true" file="jdxp.jar" tofile="../installer/lib/jdxp-${v}.jar" />
	</target>
	
	<target name="cleanup">
	 <delete>
		 <fileset dir="." includes="**/*.class"/>
		 <fileset file="MANIFEST.MF"/>
	 </delete>  
	</target>
	
	<target name="build" depends="compile,jar,cleanup" />
</project>
  